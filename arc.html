<!DOCTYPE html>
<html>
<head>
  <title>Bridge Scanner</title>
</head>
<body>
  <h1>ğŸ” ÙØ­Øµ Ø§Ù„Ø¬Ø³ÙˆØ± ...</h1>
  <div id="result" style="font-family: monospace;"></div>

  <script>
    const output = document.getElementById("result");
    let logs = [];

    function log(msg) {
      logs.push(msg);
      output.innerHTML += msg + "<br>";
    }

    log("ğŸ” Ø¬Ø³ÙˆØ± Ù…ØªØ§Ø­Ø©:");
    log(JSON.stringify(window.webkit?.messageHandlers ?? "âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ window.webkit"));

    if (window.webkit?.messageHandlers) {
      Object.keys(window.webkit.messageHandlers).forEach(name => {
        log("ğŸ“¡ ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø¬Ø³Ø±: " + name);
      });
    } else {
      log("âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¬Ø³ÙˆØ± ÙˆØ§Ø¶Ø­Ø©");
    }

    const guessNames = [
      "getUser", "getToken", "getProfile", "grabUser",
      "nativeBridge", "iosBridge", "authBridge", "sessionBridge"
    ];

    guessNames.forEach(name => {
      try {
        window.webkit.messageHandlers[name].postMessage("probe");
        log("ğŸ§ª ØªÙ… ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø¬Ø³Ø±: " + name);
      } catch (e) {
        log("âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¬Ø³Ø± Ø¨Ø§Ù„Ø§Ø³Ù…: " + name);
      }
    });

    // Ø£Ø¶Ù ØªÙ†Ø¨ÙŠÙ‡ Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª
    setTimeout(() => {
      alert("ğŸ“‹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬:\n\n" + logs.join("\n"));
    }, 1500);
  </script>
</body>
</html>
