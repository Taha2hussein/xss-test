<!-- <!DOCTYPE html>
<html>
<head><title>Test JS Bridge</title></head>
<body>
  <h1>Testing JS Bridges</h1>
  <button onclick="sendMessages()">Send Messages to Native</button>

  <script>
    function sendMessages() {
      try {
        // window.webkit.messageHandlers.pinmarkletCompletionHandler.postMessage("Hello from JS");
        // window.webkit.messageHandlers.pinmarkletNoResultsHandler.postMessage("No results test");
        window.webkit.messageHandlers.TargetAccountLinkingInterfaceHandler.postMessage({action: ""});
        // window.webkit.messageHandlers.AmazonShopExternalInterfaceHandler.postMessage("Amazon searchTerm");
        // window.webkit.messageHandlers.PinImageOffScreenDetectionHandler.postMessage({status: "offscreen"});
        alert("Messages sent to native handlers!");
      } catch (e) {
        alert("Error sending message: " + e.message);
      }
    }
  </script>
</body>
</html> -->






<!-- <!DOCTYPE html>
<html>
<head>
  <title>Test JS Bridges Individually</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
    button { margin: 8px 0; padding: 10px 15px; font-size: 16px; }
  </style>
</head>
<body>
  <h1>Test JS Bridges Individually</h1>

  <button onclick="testSingleBridge('pinmarkletCompletionHandler', 'Hello from pinmarkletCompletionHandler')">Test pinmarkletCompletionHandler</button><br>
  <button onclick="testSingleBridge('pinmarkletNoResultsHandler', 'No results test')">Test pinmarkletNoResultsHandler</button><br>
  <button onclick="testSingleBridge('TargetAccountLinkingInterfaceHandler', {action: 'linkAccount', accountId: '813392520108171674'})">Test TargetAccountLinkingInterfaceHandler</button><br>
  <button onclick="testSingleBridge('AmazonShopExternalInterfaceHandler', 'Amazon test message')">Test AmazonShopExternalInterfaceHandler</button><br>
  <button onclick="testSingleBridge('PinImageOffScreenDetectionHandler', {status: 'offscreenTest'})">Test PinImageOffScreenDetectionHandler</button><br>

  <hr>
  <div id="log" style="background: #fff; padding: 10px; border: 1px solid #ccc;"></div>

  <script>
    function testSingleBridge(bridgeName, message) {
      try {
        window.webkit.messageHandlers[bridgeName].postMessage(message);
        alert(`Message sent to ${bridgeName}`);

        // Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙÙŠ Ø§Ù„ØµÙØ­Ø©
        log(`Message sent to ${bridgeName}: ${JSON.stringify(message)}`);
      } catch (e) {
        alert(`Error sending message to ${bridgeName}: ${e.message}`);
        log(`Error sending message to ${bridgeName}: ${e.message}`);
      }
    }

    // Simulate receiving data from Native (Ù„Ùˆ Ø­ØµÙ„ Ø§Ø³ØªØ¬Ø§Ø¨Ø©)
    window.bridgeCallback = function(response) {
      alert("Response from native: " + JSON.stringify(response));
      log("Response from native: " + JSON.stringify(response));
    }

    function log(msg) {
      document.getElementById("log").innerHTML += `<div>ğŸŸ¢ ${msg}</div>`;
    }
  </script>
</body>
</html> -->




<!DOCTYPE html>
<html>
<head>
  <title>Read activeUser from UserDefaults</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
    button { margin: 8px 0; padding: 10px 15px; font-size: 16px; }
    #log { background: #fff; padding: 10px; border: 1px solid #ccc; margin-top: 20px; }
  </style>
</head>
<body>

  <h1>ğŸ“¦ Read UserDefaults Key: <code>activeUser</code></h1>
  <button onclick="readUserDefaults('activeUser')">ğŸ” Read activeUser</button>

  <div id="log"></div>

  <script>
    function readUserDefaults(key) {
      try {
        const payload = {
          action: "readDefaults",
          key: key,
          callback: "bridgeCallback"
        };

        window.webkit.messageHandlers.TargetAccountLinkingInterfaceHandler.postMessage(payload);
        log(`ğŸ“¤ Sent request to read key: "${key}"`);
      } catch (e) {
        alert("âŒ Failed to send message: " + e.message);
        log(`âŒ Error: ${e.message}`);
      }
    }

    // Callback function to receive response from native side
    window.bridgeCallback = function(response) {
      log(`ğŸ“¥ Response received: ${JSON.stringify(response)}`);
      alert("âœ… Data received: " + JSON.stringify(response));
    }

    function log(msg) {
      const logBox = document.getElementById("log");
      const entry = document.createElement("div");
      entry.textContent = msg;
      logBox.appendChild(entry);
    }
  </script>

</body>
</html>
