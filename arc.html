<!-- <!DOCTYPE html>
<html>
<head><title>Test JS Bridge</title></head>
<body>
  <h1>Testing JS Bridges</h1>
  <button onclick="sendMessages()">Send Messages to Native</button>

  <script>
    function sendMessages() {
      try {
        // window.webkit.messageHandlers.pinmarkletCompletionHandler.postMessage("Hello from JS");
        // window.webkit.messageHandlers.pinmarkletNoResultsHandler.postMessage("No results test");
        window.webkit.messageHandlers.TargetAccountLinkingInterfaceHandler.postMessage({action: ""});
        // window.webkit.messageHandlers.AmazonShopExternalInterfaceHandler.postMessage("Amazon searchTerm");
        // window.webkit.messageHandlers.PinImageOffScreenDetectionHandler.postMessage({status: "offscreen"});
        alert("Messages sent to native handlers!");
      } catch (e) {
        alert("Error sending message: " + e.message);
      }
    }
  </script>
</body>
</html> -->






<!DOCTYPE html>
<html>
<head>
  <title>Test JS Bridges Individually</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
    button { margin: 8px 0; padding: 10px 15px; font-size: 16px; }
  </style>
</head>
<body>
  <h1>Test JS Bridges Individually</h1>

  <button onclick="testSingleBridge('TargetAccountLinkingInterfaceHandler', {data: '<script>alert(1)</script>'})">Test TargetAccountLinkingInterfaceHandler</button><br>
  <button onclick="testSingleBridge('TargetAccountLinkingInterfaceHandler', {})">Test TargetAccountLinkingInterfaceHandler</button><br>
  <button onclick="testSingleBridge('TargetAccountLinkingInterfaceHandler', {action: 'linkAccount', accountId: '102039495934095'})">Test TargetAccountLinkingInterfaceHandler</button><br>
  <button onclick="testSingleBridge('TargetAccountLinkingInterfaceHandler', '<script>alert(1)</script>')">Test TargetAccountLinkingInterfaceHandler</button><br>
  <button onclick="testSingleBridge('TargetAccountLinkingInterfaceHandler', null)">Test TargetAccountLinkingInterfaceHandler</button><br>

  <hr>
  <div id="log" style="background: #fff; padding: 10px; border: 1px solid #ccc;"></div>

  <script>
    function testSingleBridge(bridgeName, message) {
      try {
        window.webkit.messageHandlers[bridgeName].postMessage(message);
        alert(`Message sent to ${bridgeName}`);

        // سجل العملية في الصفحة
        log(`Message sent to ${bridgeName}: ${JSON.stringify(message)}`);
      } catch (e) {
        alert(`Error sending message to ${bridgeName}: ${e.message}`);
        log(`Error sending message to ${bridgeName}: ${e.message}`);
      }
    }

    // Simulate receiving data from Native (لو حصل استجابة)
    window.bridgeCallback = function(response) {
      alert("Response from native: " + JSON.stringify(response));
      log("Response from native: " + JSON.stringify(response));
    }

    function log(msg) {
      document.getElementById("log").innerHTML += `<div>🟢 ${msg}</div>`;
    }
  </script>
</body>
</html>


