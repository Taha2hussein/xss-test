<!DOCTYPE html>
<html>
  <head>
    <title>🔐 Token & User Info Extractor</title>
    <script>
      window.onload = function () {
        // ⬇️ قراءة localStorage و sessionStorage
        const localStorageData = {};
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);
          localStorageData[key] = localStorage.getItem(key);
        }

        const sessionStorageData = {};
        for (let i = 0; i < sessionStorage.length; i++) {
          const key = sessionStorage.key(i);
          sessionStorageData[key] = sessionStorage.getItem(key);
        }

        // ⬇️ استخراج التوكنات من التخزين
        const tokens = {};
        const allKeys = [...Object.keys(localStorageData), ...Object.keys(sessionStorageData)];
        allKeys.forEach((key) => {
          if (/token|auth|bearer/i.test(key)) {
            tokens[key] = localStorageData[key] || sessionStorageData[key];
          }
        });

        // ⬇️ استخراج بيانات المستخدم
        const userInfo = {};
        allKeys.forEach((key) => {
          if (/user|email|id|name/i.test(key)) {
            userInfo[key] = localStorageData[key] || sessionStorageData[key];
          }
        });

        // ⬇️ استخراج من window المتغيرات العامة
        const globals = {};
        for (const key in window) {
          if (/token|auth|user|email|name/i.test(key) && typeof window[key] === 'string') {
            globals[key] = window[key];
          }
        }

        // ⬇️ عرضهم في رسالة
        const message = `
🕵️‍♂️ Extracted Data:

🔑 Tokens:
${JSON.stringify(tokens, null, 2)}

🙍‍♂️ User Info:
${JSON.stringify(userInfo, null, 2)}

🌐 Global Variables:
${JSON.stringify(globals, null, 2)}
        `;
        alert(message);
      };
    </script>
  </head>
  <body>
    <h1>🧪 Token & User Info Page</h1>
  </body>
</html>
