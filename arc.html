<!-- <!DOCTYPE html>
<html>
<head><title>Test JS Bridge</title></head>
<body>
  <h1>Testing JS Bridges</h1>
  <button onclick="sendMessages()">Send Messages to Native</button>

  <script>
    function sendMessages() {
      try {
        // window.webkit.messageHandlers.pinmarkletCompletionHandler.postMessage("Hello from JS");
        // window.webkit.messageHandlers.pinmarkletNoResultsHandler.postMessage("No results test");
        window.webkit.messageHandlers.TargetAccountLinkingInterfaceHandler.postMessage({action: ""});
        // window.webkit.messageHandlers.AmazonShopExternalInterfaceHandler.postMessage("Amazon searchTerm");
        // window.webkit.messageHandlers.PinImageOffScreenDetectionHandler.postMessage({status: "offscreen"});
        alert("Messages sent to native handlers!");
      } catch (e) {
        alert("Error sending message: " + e.message);
      }
    }
  </script>
</body>
</html> -->






<!DOCTYPE html>
<html>
<head>
  <title>Test TargetAccountLinkingInterfaceHandler</title>
  <style>
    button { margin: 6px; padding: 10px; font-size: 16px; }
    body { font-family: sans-serif; background: #f0f0f0; padding: 20px; }
  </style>
</head>
<body>

<h2>Test TargetAccountLinkingInterfaceHandler</h2>

<button onclick="sendPayload(null)">Send: null</button><br>
<button onclick="sendPayload({})">Send: {}</button><br>
<button onclick="sendPayload({action: 'linkAccount'})">Send: linkAccount (بدون accountId)</button><br>
<button onclick="sendPayload({action: 'linkAccount', accountId: '123'})">Send: linkAccount + accountId</button><br>
<button onclick="sendPayload({action: 'testAction', foo: 'bar'})">Send: testAction + foo</button><br>
<button onclick="sendPayload('<script>alert(1)</script>')">Send: <script>payload</script></button><br>

<hr>
<div id="log" style="background:#fff; padding:10px; border:1px solid #ccc;"></div>

<script>
  function sendPayload(payload) {
    try {
      window.webkit.messageHandlers.TargetAccountLinkingInterfaceHandler.postMessage(payload);
      log("✅ Sent: " + JSON.stringify(payload));
    } catch (e) {
      log("❌ Error: " + e.message);
    }
  }

  function log(msg) {
    document.getElementById("log").innerHTML += "<div>" + msg + "</div>";
  }
</script>

</body>
</html>
