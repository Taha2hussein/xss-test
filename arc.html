<!-- <!DOCTYPE html>
<html>
<head><title>Test JS Bridge</title></head>
<body>
  <h1>Testing JS Bridges</h1>
  <button onclick="sendMessages()">Send Messages to Native</button>

  <script>
    function sendMessages() {
      try {
        // window.webkit.messageHandlers.pinmarkletCompletionHandler.postMessage("Hello from JS");
        // window.webkit.messageHandlers.pinmarkletNoResultsHandler.postMessage("No results test");
        window.webkit.messageHandlers.TargetAccountLinkingInterfaceHandler.postMessage({action: ""});
        // window.webkit.messageHandlers.AmazonShopExternalInterfaceHandler.postMessage("Amazon searchTerm");
        // window.webkit.messageHandlers.PinImageOffScreenDetectionHandler.postMessage({status: "offscreen"});
        alert("Messages sent to native handlers!");
      } catch (e) {
        alert("Error sending message: " + e.message);
      }
    }
  </script>
</body>
</html> -->






<!-- <!DOCTYPE html>
<html>
<head>
  <title>Test JS Bridges Individually</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
    button { margin: 8px 0; padding: 10px 15px; font-size: 16px; }
  </style>
</head>
<body>
  <h1>Test JS Bridges Individually</h1>

  <button onclick="testSingleBridge('pinmarkletCompletionHandler', {data: '<script>alert(1)</script>'})">Test pinmarkletCompletionHandler</button><br>
  <button onclick="testSingleBridge('pinmarkletCompletionHandler', {})">Test pinmarkletCompletionHandler</button><br>
  <button onclick="testSingleBridge('pinmarkletCompletionHandler', {action: 'linkAccount', accountId: '102039495934095'})">Test pinmarkletCompletionHandler</button><br>
  <button onclick="testSingleBridge('pinmarkletCompletionHandler', '<script>alert(1)</script>')">Test pinmarkletCompletionHandler</button><br>
  <button onclick="testSingleBridge('pinmarkletCompletionHandler', {data: 'offscreenTest'})">Test pinmarkletCompletionHandler</button><br>

  <hr>
  <div id="log" style="background: #fff; padding: 10px; border: 1px solid #ccc;"></div>

  <script>
    function testSingleBridge(bridgeName, message) {
      try {
        window.webkit.messageHandlers[bridgeName].postMessage(message);
        alert(`Message sent to ${bridgeName}`);

        // سجل العملية في الصفحة
        log(`Message sent to ${bridgeName}: ${JSON.stringify(message)}`);
      } catch (e) {
        alert(`Error sending message to ${bridgeName}: ${e.message}`);
        log(`Error sending message to ${bridgeName}: ${e.message}`);
      }
    }

    // Simulate receiving data from Native (لو حصل استجابة)
    window.bridgeCallback = function(response) {
      alert("Response from native: " + JSON.stringify(response));
      log("Response from native: " + JSON.stringify(response));
    }

    function log(msg) {
      document.getElementById("log").innerHTML += `<div>🟢 ${msg}</div>`;
    }
  </script>
</body>
</html> -->


<!DOCTYPE html>
<html>
<head><title>Save Image Test</title></head>
<body>

<button onclick="saveImage()">Save Image</button>

<script>
function saveImage() {
  try {
    window.webkit.messageHandlers.pinmarkletCompletionHandler.postMessage({
      action: "saveImage",
      imageUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/47/PNG_transparency_demonstration_1.png/200px-PNG_transparency_demonstration_1.png"
    });
    alert("طلب حفظ الصورة تم إرساله");
  } catch(e) {
    alert("خطأ: " + e.message);
  }
}
</script>

</body>
</html>
